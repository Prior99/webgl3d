<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script src="webgl-utils.js"></script>
        <script src="gl-matrix.js"></script>
        <script src="graphics.js"></script>
        <script src="jquery-2.1.1.min.js"></script>
        <script src="entity.js"></script>
        <style type="text/css">
            html, body {
            	padding: 0;
            	margin: 0;
            	width: 100%;
            	height: 100%;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <canvas width="500" height="500"/>
        <script>
            $(function() {
                var models = ["models/junction_quad.js", "models/wall.js"];

                Graphics.init($("canvas")[0], loadModels); //Initialize Graphics

                function loadModels() {
                    console.log("Graphics initialized!");
                    Graphics.loadModels(models, start); //Load all models when initialization is done
                }

                function start(models) {
                    console.log("Models Loaded!");

                    var junct = new Entity(models["junction_quad"])
                        .attachTo(Graphics.root)
                        .setPosition(0, 0, -3);
                    new Entity(models["wall"])
                        .attachTo(junct)
                        .setPosition(1, 0, 0);
                    new Entity(models["wall"])
                        .attachTo(junct)
                        .setPosition(-1, 0, 0);
                    new Entity(models["wall"])
                        .attachTo(junct)
                        .setPosition(2, 0, 0);
                    new Entity(models["wall"])
                        .attachTo(junct)
                        .setPosition(-2, 0, 0);
                    Graphics.addRenderTickHandler(function() { //This method will be called on every rendertick
                        junct.rotate(0, 0.1, 0);
                    });

                    console.log("Starting...");
                    Graphics.start(); //Kick off!
                }
            });
        </script>
    </body>
</html>
